FROM node:12.16.2-alpine
MAINTAINER ismak89@icloud.com
RUN mkdir -p /app/volume
WORKDIR /app
COPY package.json .
COPY yarn.lock .
ARG REACT_APP_MAX_UPLOAD_SIZE
ENV REACT_APP_MAX_UPLOAD_SIZE $REACT_APP_MAX_UPLOAD_SIZE
ARG REACT_APP_HOST_API
ENV REACT_APP_HOST_API $REACT_APP_HOST_API
ARG REACT_APP_HOST_PUBLIC
ENV REACT_APP_HOST_PUBLIC $REACT_APP_HOST_PUBLIC
ARG REACT_APP_HOST_COOKIE_DOMAIN
ENV REACT_APP_HOST_COOKIE_DOMAIN $REACT_APP_HOST_COOKIE_DOMAIN
RUN npm install -g serve
RUN yarn install --silent
COPY . .
RUN npm run build
CMD ['serve', 'build']
CMD npm start